var jqTableObject=$({});$.sub=function(){jqTableObject.on.apply(jqTableObject,arguments)};$.unsub=function(){jqTableObject.off.apply(jqTableObject,arguments)};$.pub=function(){jqTableObject.trigger.apply(jqTableObject,arguments)};$(function(){var a=["fa-plus-square-o","fa-minus-square-o"];var c=$("body");c.on("click",".g-toggleTable--button",function(d){var i=$(this).parents(".g-toggleTable--title");var f=i.parents(".g-toggleTable--main");var j=f.find(".g-toggleTable--title");var g=f.find("tr");var e=g.index(i);var k=g.length;var h=j.eq(j.index(i)+1);var l=f.data("level");l?e=e+1:false;if(h.length){k=g.index(h)}$.each(f.find("tr"),function(m,n){if(m>e&&m<k){$(n).toggleClass("hide")}});i.find("i.fa").toggleClass(a.join(" "));b(f)});function b(i){var g=i.find(".g-toggleTable--title");var e=i.find(".g-toggleTable--buttonAll");var d=i.find(".g-toggleTable--button."+a[0]).length;var f=i.find(".g-toggleTable--button."+a[1]).length;var h=g.length-1;if(f===h){e.removeClass(a.join(" ")).addClass(a[1])}if(d===h){e.removeClass(a.join(" ")).addClass(a[0])}}c.on("click",".g-toggleTable--buttonAll",function(){var g=$(this);var d=g.hasClass(a[0]);var f=g.parents(".g-toggleTable--main").find(".c-table__child");var e=g.parents(".g-toggleTable--main").find(".g-toggleTable--title .g-toggleTable--button");e.removeClass(a.join(" "));g.removeClass(a.join(" "));if(d){f.removeClass("hide");e.addClass(a[1]);g.addClass(a[1])}else{f.addClass("hide");e.addClass(a[0]);g.addClass(a[0])}})});$(function(){var b=$("body");b.on("change",".g-selectAll",function(c){$(this).parents(".g-selectAll--main").find(".g-selectAll--input").prop("checked",this.checked)});b.on("change",".g-selectAll--input",function(f){var c=$(this).parents(".g-selectAll--main");var e=c.find(".g-selectAll--input").not(".g-selectAll").length;var d=c.find(".g-selectAll--input:checked").not(".g-selectAll").length;if(d===e){c.find(".g-selectAll").prop("checked",true);return}c.find(".g-selectAll").prop("checked",false)});b.on("click",".g-selectAll--btn",function(c){c.preventDefault();a($(this))});function a(c){var g=c.data("destory");var d=c.parents(".g-selectAll--main");var e=d.find(".g-selectAll--input:checked").not(".g-selectAll");var h=[];var j=c.data("text")||"请先选择";var k=c.data("tag")||"";var f={};var i=[];if(!g&&!e.length){$.message({type:"error",message:j,});return false}$.each(e,function(l,m){h.push($(m).data("value"));i.push($(m).val())});f={ele:c,checked:e,checkedArr:h,value:i};$.pub("GSelectAllSuccess"+k,[f])}});$(function(){var I={fixedLeft:false,fixedRight:false,fixedMinWidth:100,totalString:"--",totalTitle:"总计",handleSortData:{}};var b=s();var O='<div class="hidden-columns"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>';var p='<div class="c-table__sort {{class}}"><i class="fa fa-long-arrow-down c-table__down" aria-hidden="true"></i><i class="fa fa-long-arrow-up c-table__up" aria-hidden="true"></i></div >';var n='<div class="c-table__fixed-header-wrapper">{{theadHtml}}</div><div class="c-table__fixed-body-wrapper"> {{tbodyHtml}}</div>';var c='<div class="c-table__fixed"> {{fixedWrapper}}</div>';var r='<div class="c-table__fixed-right"> {{fixedWrapper}}</div>';var v='<div class="c-table--main" style="width: 100%;">{{hideColumn}}<div class="c-table__header-wrapper"> {{theadHtml}}</div><div class="c-table__body-wrapper"> {{tbodyHtml}}</div> {{fixedLeft}}{{fixedRight}}</div>';var z='<td class="gutter"></td>';var x='<td class="gutter" style="width:'+b+'px;"></td>';var u='<div class="c-table__fixed-right-patch" style="width: '+b+'px; height: {{headerHeight}}px;"></div>';$("body").on("click.jqTable",".c-table__down",function(){l($(this),true)});$("body").on("click.jqTable",".c-table__up",function(){l($(this),false)});function G(S,T){this.$container=T;this.config=$.extend({},I,S);this.init(this.$container)}$.extend(G.prototype,{init:function(T){this.render(T);this.event(T);var U=this;var S=this.$table.find(".c-table__sort");if(S){$.each(S,function(V,W){if($(W).hasClass("activeUp")){$(W).find(".c-table__up").trigger("click.jqTable");U.updateEvent();return false}if($(W).hasClass("activeDown")){$(W).find(".c-table__down").trigger("click.jqTable");U.updateEvent();return false}})}$(window).trigger("resize")},render:function(V){var W=this;var T=y(W,V).data("table",W);if(!W.$table){W.tableHeight=V.data("height");var S=V.parents(".c-table").last();T.addClass(S.attr("class"));S.removeAttr("class");V.after(T).remove();W.$table=T;W.$table.data("height",W.tableHeight)}else{W.$table.html(T.html())}W.colJson=d(W);W.totalJson=R(W);W.fixedWidth=W.colJson.isAllWidth;W.headerHeight=m(W.$table);if(!W.totalJson.noTotal){W.totalArr=k(W)}if(W.fixedWidth){var U=W.colJson.width.reduce(a,0);W.$table.width(U+1)}C(W)},event:function(S){var T=this;$(window).resize(function(){C(T.$table.data("table"))});this.updateEvent()},updateEvent:function(){var S=this;S.$table.find(".c-table__body-wrapper").scroll(function(){var X=$(this);var U=X.parents(".c-table--main");var Z=X.scrollLeft();var V=X.scrollTop();var Y=U.find(".c-table__header-wrapper table");var W=U.find(".c-table__footer-wrapper table");var T=U.find(".c-table__fixed-body-wrapper table");Y.css({"margin-left":-Z+"px"});W.css({"margin-left":-Z+"px"});T.css({"margin-top":-V+"px"})});if(S.config.fixedLeft||S.config.fixedRight){S.$table.find("tbody tr").hover(function(){var W=$(this);var V=W.parents(".c-table--main");var U=W.parents("tbody").find("tr").index(W);var T=V.find("tbody");$.each(T,function(Y,X){$(X).find("tr").eq(U).addClass("hover-row")})},function(){var T=$(this).parents(".c-table--main").find("tbody");T.find("tr").removeClass("hover-row")})}},updateHtml:function(S){this.init($(S))}});function l(ac,U){var Z=U?"activeDown":"activeUp";var W=ac.parents(".c-table--main");var Y=W.data("table");var ae=W.find(".c-table__fixed-body-wrapper tbody");var T=W.find(".c-table__body-wrapper table tbody");var V=T.find("tr");var ad=ac.parents("thead").find("th");var ab=[];var X=ad.index(ac.parents("th"));W.find(".c-table__sort").removeClass("activeUp activeDown");W.find(".c-table__fixed-header-wrapper th").eq(X).find(".c-table__sort").addClass(Z);W.find(".c-table__header-wrapper th").eq(X).find(".c-table__sort").addClass(Z);if(V.length<=1){return}$.each(V,function(ah,ag){var af={};af.index=ah;af.value=$(ag).find("td").eq(X).text().trim();ab.push(af)});var aa=Y.config.handleSortData;var S=Y.sortConfig;if(S[X]){if(S[X]&&aa[S[X]]&&typeof(aa[S[X]])==="function"){ab=aa[S[X]](ab)}else{ab=f(ab,S[X])}}ab=A(ab,"value",U);t(Y,T,ab);$.each(ae,function(af,ag){t(Y,$(ag),ab)})}function f(W,X){var S=[];var V;var U=new RegExp(X,"g");for(var T=0;T<W.length;T++){V=W[T];V.value=(V.value+"").replace(U,"");S.push(V)}return S}function t(Z,T,Y){var X=T.find("tr");var U=T.clone();U.html("");for(var W=0,S=Y.length;W<S;W++){var V=Y[W].index;U.append(X.eq(V).clone())}T.replaceWith(U);Z.updateEvent()}function A(S,U,V){var T;if(S.length<2){return}if(isNaN(S[0][U])){T=B}else{T=q}S.sort(function(X,W){var Z=X[U],Y=W[U];if(V){Z=W[U];Y=X[U]}return T(Z,Y)});return S}function q(T,S){return T-S}function B(T,S){var V=T.toLowerCase(),U=S.toLowerCase();if(V<U){return -1}if(V>U){return 1}return 0}function h(V,X){var ab=e(V,X);if(ab.noSort){return}V.sortConfig=ab.sortConfig;var Z=ab.sort;var aa=X.find("thead th");for(var T=0,W=Z.length;T<W;T++){var S=Z[T];if(S){var Y=S==="up"?"activeUp":S==="down"?"activeDown":"";var U=$(p.replace("{{class}}",Y));aa.eq(T).find(".cell").append(U)}}}function m(S){return S.find(".c-table__header-wrapper").height()}function y(Y,aa){var U;var Z=aa.clone().addClass("c-table__header");var V=aa.clone().addClass("c-table__body");Z.find("tbody").remove();V.find("thead").remove();h(Y,Z);var S=Z[0].outerHTML;var ad=V[0].outerHTML;var X=n.replace("{{theadHtml}}",S).replace("{{tbodyHtml}}",ad);var T=Y.config.fixedLeft?c.replace(/{{fixedWrapper}}/g,X):"";var ab=Y.config.fixedRight?r.replace(/{{fixedWrapper}}/g,X):"";var ac=v.replace("{{hideColumn}}",O).replace("{{theadHtml}}",S).replace("{{tbodyHtml}}",ad).replace("{{fixedLeft}}",T).replace("{{fixedRight}}",ab);var W=$(ac);return W}function C(Z){var X=Z.$table;var W=X.find(".c-table__header-wrapper");var V=X.find(".c-table__body-wrapper");var aa=W.find("table");var U=V.find("table");var S=X.find("colgroup");var T;var ab=Z.colJson;Q(Z,X);T=E(V,U,X,ab);if(!Z.fixedWidth){L(Z,X,ab,T)}var Y=X.width();K(X,T);if(Z.fixedWidth){F(Z,X,T)}T=E(V,U,X,ab);if(Z.config.fixedRight||Z.config.fixedLeft){j(Z,X,T);D(Z,X,T)}else{X.addClass("c-table--enable-row-hover el-table--enable-row-transition")}if(T.colScroll&&!X.find(".c-table__fixed-right-patch").length){V.after(u.replace("{{headerHeight}}",Z.headerHeight))}else{if(!T.colScroll){X.find(".c-table__fixed-right-patch").remove()}}if(!Z.totalJson.noTotal){J(Z,X)}}function J(Y,T){var X=T.find(".c-table__body-wrapper");var S=X.clone().removeClass("c-table__body-wrapper").addClass("c-table__footer-wrapper");S.find(".c-table__body").removeClass(".c-table__body").addClass("c-table__footer");var W=S.find("tbody tr:not(:first)").remove();var U=T.find(".c-table__footer-wrapper");if(U.length){U.replaceWith(S)}else{X.after(S)}var V=S.find("tbody tr").eq(0).find("td");$.each(V,function(Z,aa){V.find(".cell").eq(Z).html(Y.totalArr[Z])})}function k(W){var X=W.totalJson;var V=W.$table.find(".c-table__body-wrapper").find("tbody tr:not(:first)");var aa=[W.config.totalTitle];var S=[];var T=W.config.totalString;$.each(V,function(ab,ac){var ad=$(ac).find("td");$.each(ad,function(ae,af){if(ab===0){S.push([])}S[ae].push($(af).text().trim())})});var Z;for(var U=1;U<X.total.length;U++){var Y=X.total[U];if(Y){Z=S[U].reduce(o,0)}else{Z=T}aa.push(Z)}return aa}function D(ab,Z,S){var W=Z.find(".g-selectAll--input");if(!W.length){return}var X=Z.find(".c-table__fixed");var V=Z.find(".c-table__fixed-right");var Y=Z.find(".c-table__body-wrapper tr");var ac,aa=ab.colJson.width.length-1;var T=M(Y,0);var U=M(Y,aa);if(ab.config.fixedLeft&&T){w(V,Y,0)}if(ab.config.fixedRight&&U){w(X,Y,aa)}}function w(T,U,S){var V=T.find(".c-table__fixed-body-wrapper tr");if(T.length){$.each(V,function(X,W){i(W,S)})}$.each(U,function(X,W){i(W,S)})}function i(T,S){$(T).find("td").eq(S).find(".g-selectAll--input").remove()}function M(T,S){return T.eq(0).find("td").eq(S).find(".g-selectAll--input").length}function j(ad,V,ac){var af=ad.colJson.width.length;var U=V.find(".c-table__header-wrapper table th");var aa=V.find(".c-table__body-wrapper table tr").eq(0);var ae=aa.find("td:not(.gutter)");var ak=ad.headerHeight;var al=V.height();var Z=al-ak;var aj=V.find(".c-table__fixed");var ai=V.find(".c-table__fixed-right");var X=ad.config;var ab=X.fixedLeft;var Y=X.fixedRight;if(ac.rowScroll){Z-=b}if(ad.config.fixedRight||ab){V.find(".c-table__fixed-body-wrapper").css({"max-height":Z+"px",top:ad.headerHeight+"px"})}if(ab&&ab<=1){aj.find(".c-table__fixed-body-wrapper tr td:not(:first-child):not(.gutter)").addClass("is-hidden")}else{if(ab>1){$.each(aj.find(".c-table__fixed-body-wrapper tr"),function(an,am){$.each($(am).find("td:not(.gutter)"),function(ao,ap){if(ao>=ab){$(ap).addClass("is-hidden")}})})}}if(Y&&Y<=1){ai.find(".c-table__fixed-body-wrapper tr td:not(:nth-child("+af+")):not(.gutter)").addClass("is-hidden")}else{if(Y>1){$.each(ai.find(".c-table__fixed-body-wrapper tr"),function(an,am){$.each($(am).find("td:not(.gutter)"),function(ao,ap){if(ao<=af-Y-1){$(ap).addClass("is-hidden")}})})}}var ah=ac.rowScroll?al-b:al;if(!ad.totalJson.noTotal){ah-=aa.height()}if(ab){var ag=0;if(ab<=1){ag=ae.eq(0).width()}else{if(ab>1){for(var W=0;W<ab;W++){ag+=ae.eq(W).width()}}}aj.width(ag).height(ah);aj.find("table").width(ag)}if(ad.config.fixedRight){var T=ac.colScroll?b:0;var S=0;if(Y<=1){S=ae.eq(ae.length-1).width()}else{if(Y>1){for(var W=0;W<Y;W++){S+=ae.eq(ae.length-1-W).width()}}}ai.width(S).height(ah).css({right:T});ai.find("table").width(S)}}function F(Y,T,W){var U=T.find(".c-table__header-wrapper table");var S=T.find(".c-table__body-wrapper table");var V=Y.colJson.width.reduce(a,0);var X=W.colScroll?V+b:V;T.width(X+1);U.width(V);S.width(V)}function K(T,W){var U=T.find(".c-table__header-wrapper table");var S=T.find(".c-table__body-wrapper table");var V=U.find(".gutter").length;if(W.colScroll&&!V){U.find("colgroup").append(x);U.find("thead tr").append(x);S.find("tbody tr").append(z)}if(!W.colScroll&&V){U.find(".gutter").remove();S.find(".gutter").remove()}}function Q(Y,T){var U=Y.$table.data("height");if(U){var X=T.find(".c-table__body-wrapper");T.css({"max-height":U+"px"});X.css({"max-height":"none"});var W=Y.headerHeight;var S=T.height();var V=S-W;if(!Y.totalJson.noTotal){V-=X.find("tbody tr").eq(0).height()}X.css({"max-height":V+"px"})}}function L(ac,aa,ae,U){var S=aa.find("colgroup");var ad=aa.width();var W=ae.noWidthIndex.length;var V=ae.tdWidth.reduce(a,0);if(U.colScroll){V+=b}var T=ac.config.fixedMinWidth;var Z=[];for(var Y=0;Y<W;Y++){var af=ae.noWidthIndex[Y];Z.push(ae.tdWidth[af])}var X=Z.reduce(a,0);var ab=ad-V+X-2;if(Z.length*T>=ab){P(S,ae,Z,T)}else{Z=H(Z,ab,T,Z.length);P(S,ae,Z,false)}V=ae.width.reduce(a,0)+2;aa.find(".c-table__header-wrapper table").width(V);aa.find(".c-table__body-wrapper table").width(V)}function P(U,Y,T,X){var W=Y.noWidthIndex.length;for(var V=0;V<W;V++){var Z=Y.noWidthIndex[V];var S=X||T[V];Y.width[Z]=S;$.each(U,function(aa,ab){$(ab).find("col").eq(Z).attr("width",S)})}}function H(aa,U,X,V){var ab=aa.reduce(o,0);var T=(U-ab)/V;var ac=0;var ad=0;var S=0;if(T>0){for(var Z=0;Z<aa.length;Z++){aa[Z]=aa[Z]+T;aa[Z]<X?aa[Z]=X:S++}}else{for(var Y=0;Y<aa.length;Y++){if(aa[Y]<X){aa[Y]=X}else{if(aa[Y]>X){var W=aa[Y]+T;if(W>X){S++}aa[Y]=W<X?X:W}}}}ab=aa.reduce(o,0);if(Math.floor(ab)!==Math.floor(U)){H(aa,U,X,S)}return aa}function g(U,T){var S=T<U.config.fixedMinWidth?U.config.fixedMinWidth:T;return S}function a(T,S){return T+S}function o(T,S){return T-(-S)}function s(){var U=document.createElement("p");U.style.width="100%";U.style.height="200px";var V=document.createElement("div");V.style.position="absolute";V.style.top="0px";V.style.left="0px";V.style.visibility="hidden";V.style.width="200px";V.style.height="150px";V.style.overflow="hidden";V.appendChild(U);document.body.appendChild(V);var T=U.offsetWidth;V.style.overflow="scroll";var S=U.offsetWidth;if(T==S){S=V.clientWidth}document.body.removeChild(V);return(T-S)}function e(W,T){var U=T.find("colgroup>col");var S=N("sort",U);var V=N("sortconfig",U);return{sort:S.demo,noSort:S.nodemo,sortConfig:V.demo}}function R(X){var U=X.$table.find(".c-table__header-wrapper table");var V=U.find("colgroup>col");var S=N("total",V);var W=S.demo;var T=S.nodemo;return{total:W,noTotal:T}}function N(S,V){var W=[];var U=0;V=V.not("[name=gutter]");$.each(V,function(Z,Y){var X=$(Y).data(S);W.push(X);if(X){U++}});var T=U?false:true;return{demo:W,nodemo:T}}function d(W){W.$table.addClass("c-table--noWrap-init");var Z=W.$table.find(".c-table__header-wrapper table");var V=W.$table.find(".c-table__body-wrapper table");var ac=Z.find("colgroup>col");var ab=Z.width();var U=V.width();var T=[];var X=[];var ae=ab>U?ab:U;var Y=[];var aa=[];var ad=true;var S=ab>U?Z.find("tr").eq(0).find("th"):V.find("tr").eq(0).find("td");ac=ac.not("[name=gutter]");$.each(ac,function(ai,ag){var af=$(ag).attr("width")?Number($(ag).attr("width")):0;T.push(af);if(af){aa.push(af);X.push(af)}else{var ah=S.eq(ai).find(".cell").width()+1;ad=false;Y.push(ai);X.push(ah)}});W.$table.addClass("c-table__cell--block").removeClass("c-table--noWrap-init");return{width:T,noWidthIndex:Y,hasWidthArr:aa,isAllWidth:ad,realTotalWidth:ae,tdWidth:X}}function E(Y,T,U,W){var X=Y.height()<T.height();var S=W.width.reduce(a,0)+1;if(X){S+=b}var V=S>U.width();return{rowScroll:V,colScroll:X}}$.fn.jqTable=function(S){return this.each(function(){new G(S,$(this))})}}());